"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _passport = _interopRequireDefault(require("passport"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = app => {
  app.all("/auth", _passport.default.authenticate("sw", {
    session: false
  }), (req, res) => {
    res.json({
      status: "ok",
      token: req.session.sessid
    });
  });
  app.post("/group", (req, res) => {
    if (req.body && req.body.group) {
      req.session.group = req.body.group;
      res.json({
        status: "ok",
        message: `Group updated to ${req.body.group}`
      });
    } else {
      res.status(400).json({
        status: "fail",
        message: "invalid request body"
      });
    }
  });
  app.get("/group", (req, res) => {
    if (req.body && req.body.group) {
      res.json({
        status: "ok",
        message: `Group updated to ${req.body.group}`
      });
    }
  });
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zZXJ2ZXIvcm91dGVzLmpzIl0sIm5hbWVzIjpbImFwcCIsImFsbCIsInBhc3Nwb3J0IiwiYXV0aGVudGljYXRlIiwic2Vzc2lvbiIsInJlcSIsInJlcyIsImpzb24iLCJzdGF0dXMiLCJ0b2tlbiIsInNlc3NpZCIsInBvc3QiLCJib2R5IiwiZ3JvdXAiLCJtZXNzYWdlIiwiZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7ZUFFZUEsR0FBRyxJQUFJO0FBQ3BCQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FDRSxPQURGLEVBRUVDLGtCQUFTQyxZQUFULENBQXNCLElBQXRCLEVBQTRCO0FBQUVDLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBQTVCLENBRkYsRUFHRSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNaQSxJQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUztBQUFFQyxNQUFBQSxNQUFNLEVBQUUsSUFBVjtBQUFnQkMsTUFBQUEsS0FBSyxFQUFFSixHQUFHLENBQUNELE9BQUosQ0FBWU07QUFBbkMsS0FBVDtBQUNELEdBTEg7QUFRQVYsRUFBQUEsR0FBRyxDQUFDVyxJQUFKLENBQVMsUUFBVCxFQUFtQixDQUFDTixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUMvQixRQUFHRCxHQUFHLENBQUNPLElBQUosSUFBWVAsR0FBRyxDQUFDTyxJQUFKLENBQVNDLEtBQXhCLEVBQStCO0FBQzdCUixNQUFBQSxHQUFHLENBQUNELE9BQUosQ0FBWVMsS0FBWixHQUFvQlIsR0FBRyxDQUFDTyxJQUFKLENBQVNDLEtBQTdCO0FBQ0FQLE1BQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQUNDLFFBQUFBLE1BQU0sRUFBRSxJQUFUO0FBQWVNLFFBQUFBLE9BQU8sRUFBRyxvQkFBbUJULEdBQUcsQ0FBQ08sSUFBSixDQUFTQyxLQUFNO0FBQTNELE9BQVQ7QUFDRCxLQUhELE1BR087QUFDTFAsTUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsR0FBWCxFQUFnQkQsSUFBaEIsQ0FBcUI7QUFBQ0MsUUFBQUEsTUFBTSxFQUFFLE1BQVQ7QUFBaUJNLFFBQUFBLE9BQU8sRUFBRTtBQUExQixPQUFyQjtBQUNEO0FBQ0YsR0FQRDtBQVNBZCxFQUFBQSxHQUFHLENBQUNlLEdBQUosQ0FBUSxRQUFSLEVBQWtCLENBQUNWLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzlCLFFBQUdELEdBQUcsQ0FBQ08sSUFBSixJQUFZUCxHQUFHLENBQUNPLElBQUosQ0FBU0MsS0FBeEIsRUFBK0I7QUFDN0JQLE1BQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTO0FBQUNDLFFBQUFBLE1BQU0sRUFBRSxJQUFUO0FBQWVNLFFBQUFBLE9BQU8sRUFBRyxvQkFBbUJULEdBQUcsQ0FBQ08sSUFBSixDQUFTQyxLQUFNO0FBQTNELE9BQVQ7QUFDRDtBQUNGLEdBSkQ7QUFLRCxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhc3Nwb3J0IGZyb20gXCJwYXNzcG9ydFwiO1xuXG5leHBvcnQgZGVmYXVsdCBhcHAgPT4ge1xuICBhcHAuYWxsKFxuICAgIFwiL2F1dGhcIixcbiAgICBwYXNzcG9ydC5hdXRoZW50aWNhdGUoXCJzd1wiLCB7IHNlc3Npb246IGZhbHNlIH0pLFxuICAgIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLmpzb24oeyBzdGF0dXM6IFwib2tcIiwgdG9rZW46IHJlcS5zZXNzaW9uLnNlc3NpZCB9KTtcbiAgICB9XG4gICk7XG5cbiAgYXBwLnBvc3QoXCIvZ3JvdXBcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYocmVxLmJvZHkgJiYgcmVxLmJvZHkuZ3JvdXApIHtcbiAgICAgIHJlcS5zZXNzaW9uLmdyb3VwID0gcmVxLmJvZHkuZ3JvdXA7XG4gICAgICByZXMuanNvbih7c3RhdHVzOiBcIm9rXCIsIG1lc3NhZ2U6IGBHcm91cCB1cGRhdGVkIHRvICR7cmVxLmJvZHkuZ3JvdXB9YH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7c3RhdHVzOiBcImZhaWxcIiwgbWVzc2FnZTogXCJpbnZhbGlkIHJlcXVlc3QgYm9keVwifSlcbiAgICB9XG4gIH0pXG5cbiAgYXBwLmdldChcIi9ncm91cFwiLCAocmVxLCByZXMpID0+IHtcbiAgICBpZihyZXEuYm9keSAmJiByZXEuYm9keS5ncm91cCkge1xuICAgICAgcmVzLmpzb24oe3N0YXR1czogXCJva1wiLCBtZXNzYWdlOiBgR3JvdXAgdXBkYXRlZCB0byAke3JlcS5ib2R5Lmdyb3VwfWB9KTtcbiAgICB9XG4gIH0pXG59O1xuIl19